<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∞–π—Ç 5 "–õ" –ö–ª–∞—Å—Å–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Nunito', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            light: '#7DD3FC', // Sky 300
                            DEFAULT: '#0EA5E9', // Sky 500
                            dark: '#0284C7', // Sky 600
                        },
                        accent: {
                            light: '#BEF264', // Lime 300
                            DEFAULT: '#84CC16', // Lime 500
                            dark: '#65A30D', // Lime 600
                        },
                        glass: 'rgba(255, 255, 255, 0.65)'
                    },
                    boxShadow: {
                        'aero': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.7)',
                        'glow': '0 0 15px rgba(14, 165, 233, 0.5)'
                    }
                }
            }
        }
    </script>
    <style>
        /* FRUTIGER AERO BACKGROUND */
        body {
            background: linear-gradient(180deg, #87CEFA 0%, #E0F7FA 45%, #FFFFFF 50%, #90EE90 50%, #3CB371 100%);
            background-attachment: fixed;
            overflow-x: hidden;
            min-height: 100vh;
            color: #334155;
        }

        /* –ü—É–∑—ã—Ä—å–∫–∏ –Ω–∞ —Ñ–æ–Ω–µ */
        .bubbles {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        .bubble {
            position: absolute;
            bottom: -100px;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.1));
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            animation: rise 10s infinite ease-in;
            opacity: 0.6;
        }
        .bubble:nth-child(1) { left: 10%; width: 80px; height: 80px; animation-duration: 8s; animation-delay: 0s; }
        .bubble:nth-child(2) { left: 20%; width: 40px; height: 40px; animation-duration: 10s; animation-delay: 2s; }
        .bubble:nth-child(3) { left: 35%; width: 60px; height: 60px; animation-duration: 7s; animation-delay: 4s; }
        .bubble:nth-child(4) { left: 50%; width: 90px; height: 90px; animation-duration: 11s; animation-delay: 1s; }
        .bubble:nth-child(5) { left: 65%; width: 30px; height: 30px; animation-duration: 13s; animation-delay: 3s; }
        .bubble:nth-child(6) { left: 80%; width: 70px; height: 70px; animation-duration: 9s; animation-delay: 5s; }
        
        @keyframes rise {
            0% { bottom: -100px; transform: translateX(0); }
            50% { transform: translateX(20px); }
            100% { bottom: 120%; transform: translateX(-20px); }
        }

        /* –ì–ª—è–Ω—Ü–µ–≤—ã–µ –ø–∞–Ω–µ–ª–∏ (Aero Glass) */
        .glass-panel {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.6) 100%);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9);
        }
        
        /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.3); }
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(to bottom, #7DD3FC, #0EA5E9); 
            border-radius: 5px; 
            border: 2px solid rgba(255,255,255,0.5);
        }

        /* –ö–Ω–æ–ø–∫–∏ –≤ —Å—Ç–∏–ª–µ Aero */
        .aero-btn {
            background: linear-gradient(180deg, #ffffff 0%, #e6e6e6 49%, #d4d4d4 50%, #ececec 100%);
            border: 1px solid #a3a3a3;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 1), 0 2px 3px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            transition: all 0.2s;
        }
        .aero-btn:active {
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
            transform: translateY(1px);
        }
        
        /* –ê–∫—Ü–µ–Ω—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (–ì–æ–ª—É–±—ã–µ/–ó–µ–ª–µ–Ω—ã–µ) */
        .nav-btn {
            position: relative;
            border-radius: 999px;
            transition: all 0.3s;
            color: #0284C7;
            text-shadow: 0 1px 0 rgba(255,255,255,0.8);
        }
        .nav-btn:hover {
            background: linear-gradient(180deg, rgba(255,255,255,0.8) 0%, rgba(125, 211, 252, 0.4) 100%);
            box-shadow: 0 0 10px rgba(14, 165, 233, 0.3);
        }

        /* –ì–ª—è–Ω—Ü–µ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .aero-card {
            background: linear-gradient(160deg, rgba(255,255,255,0.95) 0%, rgba(240,249,255,0.8) 100%);
            border: 1px solid rgba(255,255,255,0.9);
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05), inset 0 0 20px rgba(255,255,255,0.8);
            position: relative;
        }
        .aero-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 40%;
            background: linear-gradient(180deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.1) 100%);
            border-radius: 1rem 1rem 40% 40% / 1rem 1rem 2rem 2rem;
            pointer-events: none;
        }

        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-3px) scale(1.01); box-shadow: 0 10px 25px -5px rgba(14, 165, 233, 0.2); }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .tab-content { display: none; animation: zoomIn 0.4s; }
        .tab-content.active { display: block; }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å */
        .toggle-checkbox:checked { right: 0; border-color: #84CC16; }
        .toggle-checkbox:checked + .toggle-label { background-color: #84CC16; }
        
        .edit-element { display: none; }
        .editing-active .edit-element { display: inline-flex; }
        
        .editing-active main {
            border: 3px dashed #0EA5E9;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 1rem;
            margin-top: 7rem;
            position: relative;
        }
        .editing-active main::before {
            content: 'üõ† –†–ï–ñ–ò–ú –°–¢–ê–†–û–°–¢–´ üõ†';
            position: absolute;
            top: -1.8rem;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(90deg, #0EA5E9, #84CC16);
            color: white;
            padding: 0.3rem 1.5rem;
            border-radius: 99px;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
        .btn-glossy-blue {
            background: linear-gradient(180deg, #38BDF8 0%, #0284C7 100%);
            border: 1px solid #0369A1;
            color: white;
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.4), 0 2px 4px rgba(0,0,0,0.2);
        }
        .btn-glossy-green {
            background: linear-gradient(180deg, #BEF264 0%, #65A30D 100%);
            border: 1px solid #4D7C0F;
            color: white;
            text-shadow: 0 1px 1px rgba(0,0,0,0.2);
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.4), 0 2px 4px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="font-sans antialiased">

    <!-- –ü—É–∑—ã—Ä—å–∫–∏ —Ñ–æ–Ω–∞ -->
    <div class="bubbles">
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="fixed w-full z-50 glass-panel top-0 left-0 rounded-b-2xl mx-auto max-w-7xl left-0 right-0 mt-2 shadow-aero">
        <div class="px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center cursor-pointer flex-shrink-0 mr-4" onclick="switchTab('news')">
                    <!-- –ò–∫–æ–Ω–∫–∞ –≥–ª–æ–±—É—Å–∞ –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã -->
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-300 to-blue-600 rounded-full flex items-center justify-center text-white shadow-lg mr-2 border-2 border-white">
                        <i class="fa-solid fa-earth-americas"></i>
                    </div>
                    <span class="font-extrabold text-2xl text-brand-dark hidden sm:block drop-shadow-sm tracking-tight" style="font-family: 'Verdana', sans-serif;">5 "–õ"</span>
                </div>
                
                <!-- –î–µ—Å–∫—Ç–æ–ø –º–µ–Ω—é -->
                <div class="hidden md:flex items-center space-x-2 overflow-x-auto py-1">
                    <button onclick="switchTab('news')" class="nav-btn px-4 py-1.5 font-bold">–ù–æ–≤–æ—Å—Ç–∏</button>
                    <button onclick="switchTab('study')" class="nav-btn px-4 py-1.5 font-bold">–£—á—ë–±–∞</button>
                    <button onclick="switchTab('class-info')" class="nav-btn px-4 py-1.5 font-bold">–ö–ª–∞—Å—Å</button>
                    <button onclick="switchTab('gallery')" class="nav-btn px-4 py-1.5 font-bold">–§–æ—Ç–æ</button>
                    <button onclick="switchTab('students')" class="nav-btn px-4 py-1.5 font-bold">–ü—Ä–æ—Ñ–∏–ª–∏</button>
                    <button onclick="switchTab('school-pages')" class="nav-btn px-4 py-1.5 font-bold text-brand-dark"><i class="fas fa-school mr-1"></i>–®–∫–æ–ª–∞</button>
                    <button onclick="switchTab('birthdays')" class="nav-btn px-4 py-1.5 font-bold text-accent-dark"><i class="fas fa-birthday-cake mr-1"></i>–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è</button>
                </div>

                <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –∫–Ω–æ–ø–∫–∞ -->
                <div class="flex items-center md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-brand-dark p-2 bg-white/50 rounded-lg backdrop-blur-sm border border-white/50"><i class="fas fa-bars text-xl"></i></button>
                </div>
            </div>
        </div>
        <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é -->
        <div id="mobile-menu" class="hidden md:hidden glass-panel m-2 rounded-xl border border-white/80">
            <div class="p-2 space-y-1">
                <button onclick="switchTab('news')" class="block w-full text-left px-4 py-2 rounded hover:bg-white/50 text-brand-dark font-bold">–ù–æ–≤–æ—Å—Ç–∏</button>
                <button onclick="switchTab('study')" class="block w-full text-left px-4 py-2 rounded hover:bg-white/50 text-brand-dark font-bold">–£—á—ë–±–∞</button>
                <button onclick="switchTab('class-info')" class="block w-full text-left px-4 py-2 rounded hover:bg-white/50 text-brand-dark font-bold">–ù–∞—à –ö–ª–∞—Å—Å</button>
                <button onclick="switchTab('gallery')" class="block w-full text-left px-4 py-2 rounded hover:bg-white/50 text-brand-dark font-bold">–§–æ—Ç–æ</button>
                <button onclick="switchTab('students')" class="block w-full text-left px-4 py-2 rounded hover:bg-white/50 text-brand-dark font-bold">–ö—Ä—É–ø–Ω—ã–º –ø–ª–∞–Ω–æ–º</button>
                <div class="border-t border-brand-light/30 my-1"></div>
                <button onclick="switchTab('school-pages')" class="block w-full text-left px-4 py-2 rounded hover:bg-white/50 text-brand-dark font-bold">–®–∫–æ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</button>
                <button onclick="switchTab('birthdays')" class="block w-full text-left px-4 py-2 rounded hover:bg-white/50 text-accent-dark font-bold">–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è</button>
            </div>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="flex-grow pt-28 pb-20 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full relative z-10">

        <!-- 1. –ù–æ–≤–æ—Å—Ç–∏ -->
        <div id="news" class="tab-content active">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-4xl font-extrabold text-white drop-shadow-md" style="text-shadow: 0 2px 4px rgba(0,0,0,0.2);">–ö–ª–∞—Å—Å–Ω—ã–µ –ù–æ–≤–æ—Å—Ç–∏</h1>
                <button onclick="openModal('addNewsModal')" class="btn-glossy-blue px-6 py-2 rounded-full shadow-lg edit-element items-center gap-2 transform hover:scale-105 transition font-bold">
                    <i class="fas fa-plus"></i> <span class="hidden sm:inline">–î–æ–±–∞–≤–∏—Ç—å</span>
                </button>
            </div>
            <div id="news-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- 2. –£—á–µ–±–∞ -->
        <div id="study" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-1">
                    <div class="aero-card p-6 sticky top-28">
                        <div class="flex justify-between items-center mb-6 relative z-10">
                            <h2 class="text-2xl font-bold text-brand-dark flex items-center gap-2">
                                <i class="fas fa-book-open text-accent"></i> –î/–ó
                            </h2>
                            <button onclick="openModal('addHomeworkModal')" class="btn-glossy-green text-xs px-3 py-1.5 rounded-full edit-element shadow">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div id="homework-list" class="space-y-4 relative z-10"></div>
                        <div id="no-homework" class="hidden text-center py-8 text-gray-400 relative z-10">
                            <i class="fas fa-check-circle text-4xl mb-2 text-accent-light"></i>
                            <p>–ó–∞–¥–∞–Ω–∏–π –Ω–µ—Ç!</p>
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-2">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-3xl font-bold text-white drop-shadow-md">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤</h2>
                        <button onclick="editScheduleMode()" class="text-white bg-brand/50 px-3 py-1 rounded-full backdrop-blur-sm hover:bg-brand font-bold text-sm edit-element border border-white/50">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4" id="schedule-container"></div>
                </div>
            </div>
        </div>

        <!-- 3. –ù–∞—à –ö–ª–∞—Å—Å -->
        <div id="class-info" class="tab-content">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
                <div class="aero-card p-6 flex items-center gap-4 relative">
                    <button onclick="openEditLeadership('teacher')" class="absolute top-2 right-2 text-gray-400 hover:text-brand edit-element z-20"><i class="fas fa-pen"></i></button>
                    <div class="w-20 h-20 bg-gradient-to-br from-brand-light to-brand rounded-full flex items-center justify-center text-white text-3xl flex-shrink-0 shadow-lg border-2 border-white relative z-10">
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <div class="relative z-10">
                        <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wide">–ö–ª–∞—Å—Å–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å</h3>
                        <p class="text-xl font-bold text-gray-800" id="teacher-name">Loading...</p>
                        <a href="" id="teacher-phone-link" class="text-brand-dark font-bold hover:underline mt-1 block">
                            <i class="fas fa-phone-alt text-sm mr-1"></i> <span id="teacher-phone">...</span>
                        </a>
                    </div>
                </div>
                <div class="aero-card p-6 flex items-center gap-4 relative">
                    <button onclick="openEditLeadership('starosta')" class="absolute top-2 right-2 text-gray-400 hover:text-brand edit-element z-20"><i class="fas fa-pen"></i></button>
                    <div class="w-20 h-20 bg-gradient-to-br from-pink-300 to-pink-500 rounded-full flex items-center justify-center text-white text-3xl flex-shrink-0 shadow-lg border-2 border-white relative z-10">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="relative z-10">
                        <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wide">–°—Ç–∞—Ä–æ—Å—Ç–∞ –∫–ª–∞—Å—Å–∞</h3>
                        <p class="text-xl font-bold text-gray-800" id="starosta-name">Loading...</p>
                        <a href="" id="starosta-phone-link" class="text-brand-dark font-bold hover:underline mt-1 block">
                            <i class="fas fa-phone-alt text-sm mr-1"></i> <span id="starosta-phone">...</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="aero-card p-6">
                    <div class="flex justify-between items-center mb-4 border-b border-gray-200/50 pb-2 relative z-10">
                        <h3 class="text-xl font-bold text-brand-dark">–ù–∞—à–∏ –£—á–∏—Ç–µ–ª—è</h3>
                        <button onclick="openModal('addTeacherModal')" class="text-accent hover:text-accent-dark edit-element"><i class="fas fa-plus-circle text-2xl drop-shadow-sm"></i></button>
                    </div>
                    <ul id="teachers-list" class="divide-y divide-gray-100 relative z-10"></ul>
                </div>
                <div class="aero-card p-6">
                    <div class="flex justify-between items-center mb-4 border-b border-gray-200/50 pb-2 relative z-10">
                        <h3 class="text-xl font-bold text-brand-dark">–°–ø–∏—Å–æ–∫ –∫–ª–∞—Å—Å–∞</h3>
                        <button onclick="openModal('addClassmateModal')" class="text-accent hover:text-accent-dark edit-element"><i class="fas fa-plus-circle text-2xl drop-shadow-sm"></i></button>
                    </div>
                    <div class="max-h-96 overflow-y-auto pr-2 relative z-10 scrollbar-thin">
                        <ul id="class-list" class="space-y-2"></ul>
                    </div>
                    <div class="mt-4 pt-2 border-t border-gray-200/50 text-right text-sm text-gray-500 relative z-10">
                        –í—Å–µ–≥–æ —É—á–µ–Ω–∏–∫–æ–≤: <span id="students-count" class="font-bold text-brand">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. –§–æ—Ç–æ–≥–∞–ª–µ—Ä–µ—è -->
        <div id="gallery" class="tab-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-white drop-shadow-md">–§–æ—Ç–æ–∞–ª—å–±–æ–º</h2>
                <label class="btn-glossy-blue px-4 py-2 rounded-full cursor-pointer shadow-lg edit-element flex items-center gap-2 font-bold hover:scale-105 transition">
                    <i class="fas fa-camera"></i> <span>–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</span>
                    <input type="file" class="hidden" accept="image/*" onchange="handlePhotoUpload(this)">
                </label>
            </div>
            <div id="gallery-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
        </div>

        <!-- 5. –ö—Ä—É–ø–Ω—ã–º –ü–ª–∞–Ω–æ–º -->
        <div id="students" class="tab-content">
             <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-white drop-shadow-md">–ö—Ä—É–ø–Ω—ã–º –ø–ª–∞–Ω–æ–º</h2>
                <button onclick="openModal('addStudentProfileModal')" class="btn-glossy-green px-5 py-2.5 rounded-full shadow-lg hover:scale-105 transition font-bold flex items-center gap-2">
                    <i class="fas fa-pen-fancy"></i> –†–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ —Å–µ–±–µ
                </button>
            </div>
            <div id="profiles-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- 6. –®–∫–æ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        <div id="school-pages" class="tab-content">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-extrabold text-white drop-shadow-lg">–®–∫–æ–ª—å–Ω—ã–µ –°—Ç—Ä–∞–Ω–∏—Ü—ã</h1>
                <p class="text-white/90 mt-2 font-semibold text-lg drop-shadow">–í—Å–µ —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-5xl mx-auto">
                <!-- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç -->
                <a href="#" class="group aero-card p-6 flex items-center gap-4 hover:border-brand transition duration-300">
                    <div class="w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl flex items-center justify-center text-white text-3xl shadow-lg group-hover:scale-110 transition relative z-10">
                        <i class="fas fa-globe"></i>
                    </div>
                    <div class="relative z-10">
                        <h3 class="text-xl font-bold text-gray-800">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç —à–∫–æ–ª—ã</h3>
                        <p class="text-sm text-gray-600">–ù–æ–≤–æ—Å—Ç–∏ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.</p>
                    </div>
                </a>

                <!-- –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ -->
                <a href="#" class="group aero-card p-6 flex items-center gap-4 hover:border-green-500 transition duration-300">
                    <div class="w-16 h-16 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl flex items-center justify-center text-white text-3xl shadow-lg group-hover:scale-110 transition relative z-10">
                        <i class="fas fa-book-open"></i>
                    </div>
                    <div class="relative z-10">
                        <h3 class="text-xl font-bold text-gray-800">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</h3>
                        <p class="text-sm text-gray-600">–û—Ü–µ–Ω–∫–∏ –∏ –¥–æ–º–∞—à–∫–∞.</p>
                    </div>
                </a>

                <!-- –®–∫–æ–ª—å–Ω–æ–µ –º–µ–Ω—é -->
                <a href="#" class="group aero-card p-6 flex items-center gap-4 hover:border-orange-500 transition duration-300">
                    <div class="w-16 h-16 bg-gradient-to-br from-orange-400 to-orange-600 rounded-2xl flex items-center justify-center text-white text-3xl shadow-lg group-hover:scale-110 transition relative z-10">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="relative z-10">
                        <h3 class="text-xl font-bold text-gray-800">–®–∫–æ–ª—å–Ω–æ–µ –º–µ–Ω—é</h3>
                        <p class="text-sm text-gray-600">–ú–µ–Ω—é —Å—Ç–æ–ª–æ–≤–æ–π.</p>
                    </div>
                </a>

                <!-- –í–∏–¥–µ–æ—É—Ä–æ–∫–∏ -->
                <a href="#" class="group aero-card p-6 flex items-center gap-4 hover:border-red-500 transition duration-300">
                    <div class="w-16 h-16 bg-gradient-to-br from-red-400 to-red-600 rounded-2xl flex items-center justify-center text-white text-3xl shadow-lg group-hover:scale-110 transition relative z-10">
                        <i class="fas fa-play-circle"></i>
                    </div>
                    <div class="relative z-10">
                        <h3 class="text-xl font-bold text-gray-800">–í–∏–¥–µ–æ—É—Ä–æ–∫–∏</h3>
                        <p class="text-sm text-gray-600">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.</p>
                    </div>
                </a>
            </div>
        </div>

        <!-- 7. –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div id="birthdays" class="tab-content">
            <!-- –ë–ª–æ–∫ –∏–º–µ–Ω–∏–Ω–Ω–∏–∫–æ–≤ -->
            <div class="bg-gradient-to-br from-brand-light to-brand rounded-3xl p-8 mb-10 text-white text-center relative overflow-hidden shadow-2xl border-4 border-white/30">
                <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/diagonal-stripes.png')] opacity-10"></div>
                <div class="relative z-10">
                    <h2 class="text-4xl font-extrabold mb-6 drop-shadow-lg">üéâ –ò–º–µ–Ω–∏–Ω–Ω–∏–∫–∏ –ú–µ—Å—è—Ü–∞ üéâ</h2>
                    <div class="flex flex-wrap justify-center gap-8">
                        <!-- –ò–º–µ–Ω–∏–Ω–Ω–∏–∫ 1 -->
                        <div class="aero-card p-4 w-48 transform hover:scale-110 transition duration-300">
                            <div class="text-5xl mb-2 drop-shadow-sm">üë∏</div>
                            <h3 class="font-bold text-lg text-gray-800 relative z-10">–ê–Ω—è –°–º–∏—Ä–Ω–æ–≤–∞</h3>
                            <p class="text-brand font-bold text-sm relative z-10">15 –Ω–æ—è–±—Ä—è</p>
                        </div>
                        <!-- –ò–º–µ–Ω–∏–Ω–Ω–∏–∫ 2 -->
                        <div class="aero-card p-4 w-48 transform hover:scale-110 transition duration-300">
                            <div class="text-5xl mb-2 drop-shadow-sm">üéÆ</div>
                            <h3 class="font-bold text-lg text-gray-800 relative z-10">–ú–∞–∫—Å–∏–º –ò–≤–∞–Ω–æ–≤</h3>
                            <p class="text-brand font-bold text-sm relative z-10">22 –Ω–æ—è–±—Ä—è</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –°—Ç–µ–Ω–∞ –ø–æ–∂–µ–ª–∞–Ω–∏–π -->
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-white drop-shadow-md"><i class="fas fa-heart text-red-500 mr-2 drop-shadow-sm"></i>–°—Ç–µ–Ω–∞ –ø–æ–∂–µ–ª–∞–Ω–∏–π</h2>
                <button onclick="openModal('addWishModal')" class="btn-glossy-blue px-4 py-2 rounded-full shadow-lg transition flex items-center gap-2 font-bold">
                    <i class="fas fa-paper-plane"></i> –û—Å—Ç–∞–≤–∏—Ç—å –ø–æ–∂–µ–ª–∞–Ω–∏–µ
                </button>
            </div>

            <div id="wishes-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

    </main>

    <!-- –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –†–ï–ñ–ò–ú–ê –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø (FOOTER) -->
    <div class="fixed bottom-4 left-4 z-50">
        <div class="glass-panel px-3 py-2 rounded-full shadow-aero flex items-center gap-2">
            <div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                <input type="checkbox" name="toggle" id="edit-mode-toggle" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-2 border-gray-300 appearance-none cursor-pointer transition-all duration-300 left-0 shadow-inner"/>
                <label for="edit-mode-toggle" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer transition-colors duration-300 shadow-inner"></label>
            </div>
            <label for="edit-mode-toggle" class="text-xs font-bold text-gray-600 cursor-pointer uppercase tracking-wide mr-1">
                –°—Ç–∞—Ä–æ—Å—Ç–∞
            </label>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê (–î–∏–∑–∞–π–Ω –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ Aero) -->

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –í–í–û–î–ê –ü–ê–†–û–õ–Ø -->
    <div id="passwordModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center bg-black/40 backdrop-blur-sm">
        <div class="aero-card w-full max-w-sm p-8 text-center">
            <div class="w-16 h-16 bg-gradient-to-b from-gray-100 to-gray-300 rounded-full mx-auto flex items-center justify-center shadow-lg border border-gray-400 mb-4">
                <i class="fas fa-lock text-gray-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2 relative z-10">–î–æ—Å—Ç—É–ø —Å—Ç–∞—Ä–æ—Å—Ç—ã</h3>
            <p class="text-sm text-gray-500 mb-6 relative z-10">–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –ø–∞—Ä–æ–ª—å</p>
            <form onsubmit="verifyPassword(event)" class="relative z-10">
                <div class="relative w-full mb-4">
                    <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand shadow-inner text-center text-lg tracking-widest bg-white/80 pr-10" autofocus>
                    <button type="button" onclick="togglePasswordVisibility()" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-brand cursor-pointer z-20" title="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">
                        <i class="fas fa-eye" id="passwordToggleIcon"></i>
                    </button>
                </div>
                <div class="flex gap-2">
                    <button type="button" onclick="cancelPassword()" class="flex-1 py-2 rounded-lg border border-gray-300 bg-gray-100 hover:bg-gray-200 font-bold text-gray-600 shadow-sm">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="flex-1 btn-glossy-blue py-2 rounded-lg font-bold shadow-md">–í–æ–π—Ç–∏</button>
                </div>
            </form>
        </div>
    </div>

    <!-- AI –û—Ç–≤–µ—Ç -->
    <div id="aiResponseModal" class="fixed inset-0 z-[60] hidden flex items-center justify-center bg-black/40 p-4 backdrop-blur-sm">
        <div class="aero-card w-full max-w-lg overflow-hidden flex flex-col max-h-[80vh]">
            <div class="bg-gradient-to-r from-brand to-brand-light p-4 flex items-center gap-3 border-b border-white/30">
                <div class="bg-white/20 p-2 rounded-full backdrop-blur-md border border-white/40">
                    <i class="fas fa-robot text-white text-xl"></i>
                </div>
                <h3 class="text-white font-bold text-lg drop-shadow-sm">AI –ü–æ–º–æ—â–Ω–∏–∫</h3>
            </div>
            <div class="p-6 overflow-y-auto relative z-10 bg-white/50">
                <div id="ai-content" class="prose text-gray-800 leading-relaxed font-medium"></div>
            </div>
            <div class="bg-gray-50/80 px-6 py-4 flex justify-end relative z-10 border-t border-gray-200">
                <button onclick="closeModal('aiResponseModal')" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg font-bold transition shadow-sm border border-gray-300">–ü–æ–Ω—è—Ç–Ω–æ, —Å–ø–∞—Å–∏–±–æ!</button>
            </div>
        </div>
    </div>
    
    <!-- –î–æ–±–∞–≤–∏—Ç—å –î–ó -->
    <div id="addHomeworkModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/40 p-4 backdrop-blur-sm">
        <div class="aero-card w-full max-w-md p-6">
            <h3 class="text-xl font-bold mb-4 relative z-10 text-brand-dark">–î–æ–±–∞–≤–∏—Ç—å –î/–ó</h3>
            <form onsubmit="submitHomework(event)" class="relative z-10">
                <input id="hwSubject" type="text" placeholder="–ü—Ä–µ–¥–º–µ—Ç (–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞)" class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required>
                <input id="hwTask" type="text" placeholder="–ó–∞–¥–∞–Ω–∏–µ (–°—Ç—Ä. 5 ‚Ññ10)" class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required>
                <input id="hwDate" type="text" placeholder="–°—Ä–æ–∫ (–ó–∞–≤—Ç—Ä–∞, 25.11)" class="w-full p-2 border border-gray-300 rounded mb-4 shadow-inner bg-white/80" required>
                <button type="submit" class="w-full btn-glossy-green py-2 rounded font-bold shadow-md mb-2">–î–æ–±–∞–≤–∏—Ç—å</button>
                <button type="button" onclick="closeModal('addHomeworkModal')" class="w-full py-2 text-gray-500 hover:text-gray-700 font-bold">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ -->
    <div id="editLeadershipModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/40 p-4 backdrop-blur-sm">
        <div class="aero-card w-full max-w-md p-6">
            <h3 class="text-xl font-bold mb-4 relative z-10 text-brand-dark" id="leadershipModalTitle">–ò–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</h3>
            <form onsubmit="submitLeadership(event)" class="relative z-10">
                <input type="hidden" id="leadershipType">
                <label class="block text-sm font-bold mb-1 text-gray-600">–§–ò–û</label>
                <input id="leadName" type="text" class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required>
                <label class="block text-sm font-bold mb-1 text-gray-600">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input id="leadPhone" type="text" class="w-full p-2 border border-gray-300 rounded mb-4 shadow-inner bg-white/80" required>
                <button type="submit" class="w-full btn-glossy-blue py-2 rounded font-bold shadow-md mb-2">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" onclick="closeModal('editLeadershipModal')" class="w-full py-2 text-gray-500 hover:text-gray-700 font-bold">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- –î–æ–±–∞–≤–∏—Ç—å —É—á–∏—Ç–µ–ª—è -->
    <div id="addTeacherModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/40 p-4 backdrop-blur-sm">
        <div class="aero-card w-full max-w-md p-6">
            <h3 class="text-xl font-bold mb-4 relative z-10 text-brand-dark">–î–æ–±–∞–≤–∏—Ç—å —É—á–∏—Ç–µ–ª—è</h3>
            <form onsubmit="submitTeacher(event)" class="relative z-10">
                <input id="teachSubject" type="text" placeholder="–ü—Ä–µ–¥–º–µ—Ç (–ò—Å—Ç–æ—Ä–∏—è)" class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required>
                <input id="teachName" type="text" placeholder="–§–ò–û (–ò–≤–∞–Ω–æ–≤–∞ –ê.–ê.)" class="w-full p-2 border border-gray-300 rounded mb-4 shadow-inner bg-white/80" required>
                <button type="submit" class="w-full btn-glossy-blue py-2 rounded font-bold shadow-md mb-2">–î–æ–±–∞–≤–∏—Ç—å</button>
                <button type="button" onclick="closeModal('addTeacherModal')" class="w-full py-2 text-gray-500 hover:text-gray-700 font-bold">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞ –≤ —Å–ø–∏—Å–æ–∫ -->
    <div id="addClassmateModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/40 p-4 backdrop-blur-sm">
        <div class="aero-card w-full max-w-md p-6">
            <h3 class="text-xl font-bold mb-4 relative z-10 text-brand-dark">–î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞</h3>
            <form onsubmit="submitClassmate(event)" class="relative z-10">
                <input id="classmateName" type="text" placeholder="–§–∞–º–∏–ª–∏—è –ò–º—è" class="w-full p-2 border border-gray-300 rounded mb-4 shadow-inner bg-white/80" required>
                <button type="submit" class="w-full btn-glossy-blue py-2 rounded font-bold shadow-md mb-2">–î–æ–±–∞–≤–∏—Ç—å</button>
                <button type="button" onclick="closeModal('addClassmateModal')" class="w-full py-2 text-gray-500 hover:text-gray-700 font-bold">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>
    
    <!-- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å -->
    <div id="addNewsModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/40 p-4 backdrop-blur-sm">
        <div class="aero-card w-full max-w-md p-6">
            <div class="flex justify-between items-center mb-4 relative z-10">
                <h3 class="text-xl font-bold text-brand-dark">–ù–æ–≤–∞—è –Ω–æ–≤–æ—Å—Ç—å</h3>
                <button type="button" onclick="generateNewsAI()" class="text-sm btn-glossy-green px-3 py-1 rounded-full hover:scale-105 transition shadow-md flex items-center gap-2 font-bold" id="ai-news-btn">
                    <i class="fas fa-magic"></i> –ù–∞–ø–∏—Å–∞—Ç—å —Å –ò–ò
                </button>
            </div>
            <form onsubmit="submitNews(event)" class="relative z-10">
                <input id="newsTitle" type="text" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫" class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required>
                <div class="relative">
                    <textarea id="newsContent" rows="4" placeholder="–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏..." class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required></textarea>
                    <div id="ai-news-loader" class="hidden absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center rounded">
                        <div class="flex flex-col items-center">
                            <i class="fas fa-spinner fa-spin text-brand text-2xl"></i>
                            <span class="text-xs text-brand font-bold mt-1">Gemini –ø–∏—à–µ—Ç...</span>
                        </div>
                    </div>
                </div>
                <button type="submit" class="w-full btn-glossy-blue py-2 rounded font-bold shadow-md mb-2">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                <button type="button" onclick="closeModal('addNewsModal')" class="w-full py-2 text-gray-500 hover:text-gray-700 font-bold">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∫–µ—Ç—É -->
    <div id="addStudentProfileModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/40 p-4 backdrop-blur-sm">
        <div class="aero-card w-full max-w-md p-6">
            <h3 class="text-xl font-bold mb-4 relative z-10 text-brand-dark">–ö—Ä—É–ø–Ω—ã–º –ø–ª–∞–Ω–æ–º</h3>
            <form onsubmit="submitProfile(event)" class="relative z-10">
                <input id="profName" type="text" placeholder="–ò–º—è –§–∞–º–∏–ª–∏—è" class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required>
                <input id="profHobby" type="text" placeholder="–ú–æ–µ —Ö–æ–±–±–∏" class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required>
                <textarea id="profBio" rows="3" placeholder="–ù–µ–º–Ω–æ–≥–æ –æ —Å–µ–±–µ..." class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required></textarea>
                <select id="profEmoji" class="w-full p-2 border border-gray-300 rounded mb-4 shadow-inner bg-white/80">
                    <option>üòé</option><option>ü§ì</option><option>‚öΩ</option><option>üé®</option><option>üéÆ</option><option>üíÉ</option><option>üé∏</option>
                </select>
                <button type="submit" class="w-full btn-glossy-green py-2 rounded font-bold shadow-md mb-2">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                <button type="button" onclick="closeModal('addStudentProfileModal')" class="w-full py-2 text-gray-500 hover:text-gray-700 font-bold">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∂–µ–ª–∞–Ω–∏–µ -->
    <div id="addWishModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/40 p-4 backdrop-blur-sm">
        <div class="aero-card w-full max-w-md p-6">
            <h3 class="text-xl font-bold mb-4 text-center relative z-10 text-brand-dark">üéâ –û—Å—Ç–∞–≤–∏—Ç—å –ø–æ–∂–µ–ª–∞–Ω–∏–µ</h3>
            <form onsubmit="submitWish(event)" class="relative z-10">
                <input id="wishTo" type="text" placeholder="–ö–æ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ê–Ω–µ)" class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required>
                <textarea id="wishText" rows="3" placeholder="–¢–≤–æ–∏ —Ç–µ–ø–ª—ã–µ —Å–ª–æ–≤–∞..." class="w-full p-2 border border-gray-300 rounded mb-3 shadow-inner bg-white/80" required></textarea>
                <input id="wishFrom" type="text" placeholder="–û—Ç –∫–æ–≥–æ (—Ç–≤–æ–µ –∏–º—è)" class="w-full p-2 border border-gray-300 rounded mb-4 shadow-inner bg-white/80" required>
                <button type="submit" class="w-full btn-glossy-blue py-2 rounded font-bold hover:scale-105 transition shadow-md mb-2">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                <button type="button" onclick="closeModal('addWishModal')" class="w-full py-2 text-gray-500 hover:text-gray-700 font-bold">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- –¢–æ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="toast" class="fixed bottom-20 right-5 bg-gray-800/90 text-white px-6 py-3 rounded-xl shadow-2xl transform translate-y-20 opacity-0 transition-all duration-300 z-50 border border-white/20 backdrop-blur-md font-bold"></div>

    <script>
        // --- GEMINI API CONFIG ---
        const apiKey = ""; 
        
        async function callGemini(prompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }]
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) throw new Error('API Error');

                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error("Gemini Error:", error);
                return "–û–π, —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ!";
            }
        }

        // --- AI FEATURES ---
        async function explainHomework(id) {
            const hw = homework.find(h => h.id === id);
            if (!hw) return;

            document.getElementById('aiResponseModal').classList.remove('hidden');
            const contentDiv = document.getElementById('ai-content');
            contentDiv.innerHTML = `
                <div class="flex flex-col items-center justify-center py-10 text-brand">
                    <i class="fas fa-sparkles fa-spin text-4xl mb-4"></i>
                    <p class="font-bold animate-pulse">–ò–ò –¥—É–º–∞–µ—Ç –Ω–∞–¥ –∑–∞–¥–∞–Ω–∏–µ–º...</p>
                </div>
            `;

            const prompt = `–¢—ã ‚Äî –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π —É—á–∏—Ç–µ–ª—å –¥–ª—è 5 –∫–ª–∞—Å—Å–∞. –û–±—ä—è—Å–Ω–∏ –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É "${hw.subject}": "${hw.task}". –î–∞–π –ø–æ–¥—Å–∫–∞–∑–∫—É, –Ω–æ –Ω–µ —Ä–µ—à–∞–π –∑–∞ —É—á–µ–Ω–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏.`;
            
            const response = await callGemini(prompt);
            
            const formattedResponse = response
                .replace(/\*\*(.*?)\*\*/g, '<b>$1</b>')
                .replace(/\*(.*?)\*/g, '<i>$1</i>')
                .replace(/\n/g, '<br>');

            contentDiv.innerHTML = formattedResponse;
        }

        async function generateNewsAI() {
            const title = document.getElementById('newsTitle').value;
            if (!title) {
                showToast("–°–Ω–∞—á–∞–ª–∞ –≤–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏!");
                return;
            }

            const btn = document.getElementById('ai-news-btn');
            const loader = document.getElementById('ai-news-loader');
            const textarea = document.getElementById('newsContent');
            
            btn.disabled = true;
            btn.classList.add('opacity-50');
            loader.classList.remove('hidden');

            const prompt = `–ù–∞–ø–∏—à–∏ –∫–æ—Ä–æ—Ç–∫—É—é, –≤–µ—Å–µ–ª—É—é –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é –Ω–æ–≤–æ—Å—Ç—å –¥–ª—è —à–∫–æ–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ 5 –∫–ª–∞—Å—Å–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º: "${title}". –°—Ç–∏–ª—å: –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, —à–∫–æ–ª—å–Ω—ã–π. –î–ª–∏–Ω–∞: 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.`;

            const text = await callGemini(prompt);
            
            textarea.value = text;
            
            loader.classList.add('hidden');
            btn.disabled = false;
            btn.classList.remove('opacity-50');
        }


        // --- –î–ê–ù–ù–´–ï ---
        
        let isEditMode = false;

        let leadership = {
            teacher: { name: "–ò–≤–∞–Ω–æ–≤–∞ –ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–Ω–∞", phone: "+7 (900) 123-45-67" },
            starosta: { name: "–°–º–∏—Ä–Ω–æ–≤ –ê—Ä—Ç–µ–º", phone: "+7 (900) 987-65-43" }
        };

        let teachers = [
            { id: 1, subject: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", name: "–ü–µ—Ç—Ä–æ–≤–∞ –ï.–°." },
            { id: 2, subject: "–†—É—Å—Å–∫–∏–π —è–∑—ã–∫", name: "–°–∏–¥–æ—Ä–æ–≤–∞ –ê.–í." },
            { id: 3, subject: "–ò—Å—Ç–æ—Ä–∏—è", name: "–í–æ–ª–∫–æ–≤ –î.–ú." },
            { id: 4, subject: "–§–∏–∑–∫—É–ª—å—Ç—É—Ä–∞", name: "–û—Ä–ª–æ–≤ –ü.–ü." }
        ];

        let classmates = [
            "–ê–ª–µ–∫—Å–µ–µ–≤ –ò–≤–∞–Ω", "–ë–æ—Ä–∏—Å–æ–≤–∞ –ê–Ω–Ω–∞", "–í–∏–Ω–æ–≥—Ä–∞–¥–æ–≤ –î–µ–Ω–∏—Å", 
            "–ì—Ä–∏–≥–æ—Ä—å–µ–≤–∞ –û–ª—å–≥–∞", "–î–º–∏—Ç—Ä–∏–µ–≤ –ú–∞–∫—Å–∏–º", "–ï–≥–æ—Ä–æ–≤–∞ –ï–ª–µ–Ω–∞", 
            "–ñ—É–∫–æ–≤ –ü–µ—Ç—Ä", "–ó–∏–º–∏–Ω –ö–∏—Ä–∏–ª–ª", "–ò–≤–∞–Ω–æ–≤–∞ –°–æ—Ñ–∏—è"
        ];

        let schedule = {
            "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫": ["–†–∞–∑–≥–æ–≤–æ—Ä—ã –æ –≤–∞–∂–Ω–æ–º", "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "–†—É—Å—Å–∫–∏–π —è–∑—ã–∫", "–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞", "–§–∏–∑–∫—É–ª—å—Ç—É—Ä–∞"],
            "–í—Ç–æ—Ä–Ω–∏–∫": ["–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫", "–ò—Å—Ç–æ—Ä–∏—è", "–ì–µ–æ–≥—Ä–∞—Ñ–∏—è", "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è"],
            "–°—Ä–µ–¥–∞": ["–†—É—Å—Å–∫–∏–π —è–∑—ã–∫", "–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞", "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "–ë–∏–æ–ª–æ–≥–∏—è", "–ú—É–∑—ã–∫–∞"],
            "–ß–µ—Ç–≤–µ—Ä–≥": ["–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫", "–§–∏–∑–∫—É–ª—å—Ç—É—Ä–∞", "–ò–ó–û", "–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ"],
            "–ü—è—Ç–Ω–∏—Ü–∞": ["–†—É—Å—Å–∫–∏–π —è–∑—ã–∫", "–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞", "–ò—Å—Ç–æ—Ä–∏—è", "–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞", "–ö–ª–∞—Å—Å–Ω—ã–π —á–∞—Å"]
        };

        let homework = [
            { id: 1, subject: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", task: "–°—Ç—Ä. 45 ‚Ññ12, 14. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —É–º–Ω–æ–∂–µ–Ω–∏—è.", date: "–ó–∞–≤—Ç—Ä–∞" },
            { id: 2, subject: "–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞", task: "–ß–∏—Ç–∞—Ç—å '–ú—É–º—É' –¢—É—Ä–≥–µ–Ω–µ–≤–∞. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–µ—Ä–µ—Å–∫–∞–∑.", date: "–°—Ä–µ–¥–∞" },
            { id: 3, subject: "–ò—Å—Ç–æ—Ä–∏—è", task: "–ü–∞—Ä–∞–≥—Ä–∞—Ñ 10, –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –≤ –∫–æ–Ω—Ü–µ.", date: "–ß–µ—Ç–≤–µ—Ä–≥" }
        ];

        let news = [
            { id: 1, title: "–ü–æ—Ö–æ–¥ –≤ –º—É–∑–µ–π", content: "–í –ø—è—Ç–Ω–∏—Ü—É –µ–¥–µ–º –≤ –º—É–∑–µ–π! –°–±–æ—Ä –≤ 10:00 —É —à–∫–æ–ª—ã.", date: "20.10" },
            { id: 2, title: "–°—É–±–±–æ—Ç–Ω–∏–∫", content: "–í—Å–µ–º –ø—Ä–∏–Ω–µ—Å—Ç–∏ –ø–µ—Ä—á–∞—Ç–∫–∏ –∏ —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ.", date: "18.10" }
        ];

        let profiles = [
             { id: 1, name: '–ê–Ω—è –°.', hobby: '–†–∏—Å–æ–≤–∞–Ω–∏–µ', bio: '–û–±–æ–∂–∞—é —Ä–∏—Å–æ–≤–∞—Ç—å —Å–∫–µ—Ç—á–∏ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–∞—Ö!', emoji: 'üé®' },
             { id: 2, name: '–ú–∞–∫—Å –ò.', hobby: '–§—É—Ç–±–æ–ª', bio: '–õ—É—á—à–∏–π –Ω–∞–ø–∞–¥–∞—é—â–∏–π –≤ –∫–ª–∞—Å—Å–µ.', emoji: '‚öΩ' }
        ];

        let wishes = [
            { id: 1, to: "–ê–Ω–µ", text: "–° –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ñ–µ–ª–∞—é –æ–¥–Ω–∏—Ö –ø—è—Ç–µ—Ä–æ–∫!", from: "–ú–∞—à–∞ –ö." },
            { id: 2, to: "–ú–∞–∫—Å–∏–º—É", text: "–ü–æ–±–µ–¥ –≤ —Ñ—É—Ç–±–æ–ª–µ, —Ç—ã –ª—É—á—à–∏–π –≤—Ä–∞—Ç–∞—Ä—å!", from: "–ö–æ–º–∞–Ω–¥–∞" }
        ];
        
        let photos = [
            'https://images.unsplash.com/photo-1509062522246-3755977927d7?w=400',
            'https://images.unsplash.com/photo-1427504746383-796ada276c3f?w=400'
        ];

        // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---

        document.addEventListener('DOMContentLoaded', () => {
            renderAll();
            
            const toggle = document.getElementById('edit-mode-toggle');
            
            toggle.addEventListener('click', (e) => {
                if (e.target.checked) {
                    e.preventDefault(); 
                    e.target.checked = false; 
                    
                    document.getElementById('passwordModal').classList.remove('hidden');
                    const input = document.getElementById('passwordInput');
                    input.value = '';
                    input.type = 'password'; // –°–±—Ä–æ—Å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
                    document.getElementById('passwordToggleIcon').className = 'fas fa-eye';
                    input.focus();
                } else {
                    isEditMode = false;
                    document.body.classList.remove('editing-active');
                    renderAll();
                    showToast("–†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞");
                }
            });
        });

        // --- –õ–û–ì–ò–ö–ê –ü–ê–†–û–õ–Ø ---
        function togglePasswordVisibility() {
            const input = document.getElementById('passwordInput');
            const icon = document.getElementById('passwordToggleIcon');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        function verifyPassword(e) {
            e.preventDefault();
            const password = document.getElementById('passwordInput').value;
            const modal = document.getElementById('passwordModal');
            const toggle = document.getElementById('edit-mode-toggle');

            // –ò–∑–º–µ–Ω—ë–Ω –ø–∞—Ä–æ–ª—å –Ω–∞ '—è_—Å—Ç–∞—Ä–æ—Å—Ç–∞'
            if (password === "—è_—Å—Ç–∞—Ä–æ—Å—Ç–∞") {
                isEditMode = true;
                toggle.checked = true;
                document.body.classList.add('editing-active');
                renderAll();
                modal.classList.add('hidden');
                showToast("–†–µ–∂–∏–º —Å—Ç–∞—Ä–æ—Å—Ç—ã –≤–∫–ª—é—á–µ–Ω!");
            } else {
                const input = document.getElementById('passwordInput');
                input.classList.add('border-red-500', 'ring-2', 'ring-red-200');
                setTimeout(() => input.classList.remove('border-red-500', 'ring-2', 'ring-red-200'), 500);
                input.value = '';
                showToast("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!");
            }
        }

        function cancelPassword() {
            document.getElementById('passwordModal').classList.add('hidden');
            document.getElementById('edit-mode-toggle').checked = false;
        }

        function renderAll() {
            renderLeadership();
            renderTeachers();
            renderClassList();
            renderSchedule();
            renderHomework();
            renderNews();
            renderProfiles();
            renderGallery();
            renderWishes();
        }

        // --- –†–ï–ù–î–ï–† –§–£–ù–ö–¶–ò–ò ---

        function renderLeadership() {
            document.getElementById('teacher-name').textContent = leadership.teacher.name;
            document.getElementById('teacher-phone').textContent = leadership.teacher.phone;
            document.getElementById('teacher-phone-link').href = `tel:${leadership.teacher.phone}`;
            
            document.getElementById('starosta-name').textContent = leadership.starosta.name;
            document.getElementById('starosta-phone').textContent = leadership.starosta.phone;
            document.getElementById('starosta-phone-link').href = `tel:${leadership.starosta.phone}`;
        }

        function renderTeachers() {
            const list = document.getElementById('teachers-list');
            list.innerHTML = teachers.map(t => `
                <li class="py-3 flex justify-between items-center relative z-10">
                    <div>
                        <p class="text-sm text-gray-500 font-bold">${t.subject}</p>
                        <p class="font-bold text-gray-800 text-lg">${t.name}</p>
                    </div>
                    ${isEditMode ? `<button onclick="deleteTeacher(${t.id})" class="text-red-400 hover:text-red-600 transition"><i class="fas fa-trash"></i></button>` : ''}
                </li>
            `).join('');
        }

        function renderClassList() {
            const list = document.getElementById('class-list');
            list.innerHTML = classmates.map((name, index) => `
                <li class="flex items-center justify-between p-2 hover:bg-white/50 rounded transition relative z-10">
                    <div class="flex items-center gap-3">
                        <div class="w-6 h-6 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full text-xs flex items-center justify-center text-gray-600 font-bold shadow-sm border border-gray-400">${index + 1}</div>
                        <span class="font-bold text-gray-700">${name}</span>
                    </div>
                    ${isEditMode ? `<button onclick="deleteClassmate(${index})" class="text-red-400 hover:text-red-600 text-xs transition"><i class="fas fa-trash"></i></button>` : ''}
                </li>
            `).join('');
            document.getElementById('students-count').textContent = classmates.length;
        }

        function renderSchedule() {
            const container = document.getElementById('schedule-container');
            container.innerHTML = Object.entries(schedule).map(([day, lessons]) => `
                <div class="aero-card p-4">
                    <div class="flex justify-between items-center mb-3 border-b border-gray-200/50 pb-2 relative z-10">
                        <h3 class="font-bold text-brand-dark text-lg">${day}</h3>
                        ${isEditMode ? `<button onclick="editDaySchedule('${day}')" class="text-xs text-gray-400 hover:text-brand transition"><i class="fas fa-pen"></i></button>` : ''}
                    </div>
                    <ul class="text-sm space-y-2 text-gray-700 relative z-10">
                        ${lessons.map((lesson, i) => `
                            <li class="flex gap-2 items-center">
                                <span class="text-accent font-bold w-4">${i+1}.</span>
                                <span class="font-medium">${lesson}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `).join('');
        }

        function renderHomework() {
            const list = document.getElementById('homework-list');
            const empty = document.getElementById('no-homework');
            
            if (homework.length === 0) {
                list.innerHTML = '';
                empty.classList.remove('hidden');
                return;
            }
            empty.classList.add('hidden');
            
            list.innerHTML = homework.map(hw => `
                <div class="bg-gradient-to-r from-yellow-50 to-white border-l-4 border-yellow-400 p-4 rounded-r-lg relative group hover:shadow-md transition shadow-sm mb-3">
                    ${isEditMode ? `<button onclick="deleteHomework(${hw.id})" class="absolute top-1 right-1 text-red-300 hover:text-red-500 transition"><i class="fas fa-times"></i></button>` : ''}
                    
                    <div class="flex justify-between items-start">
                         <div>
                            <h4 class="font-bold text-gray-800 text-sm">${hw.subject}</h4>
                            <p class="text-gray-700 text-sm mt-1 leading-snug">${hw.task}</p>
                        </div>
                        <button onclick="explainHomework(${hw.id})" title="–û–±—ä—è—Å–Ω–∏—Ç—å —Å –ò–ò" class="bg-white border border-purple-200 hover:bg-purple-50 text-brand p-2 rounded-full shadow-sm transition transform hover:scale-110">
                            <i class="fas fa-sparkles"></i>
                        </button>
                    </div>

                    <div class="mt-2 flex items-center text-xs text-gray-500 font-bold">
                        <i class="far fa-clock mr-1"></i> ${hw.date}
                    </div>
                </div>
            `).join('');
        }

        function renderNews() {
            document.getElementById('news-container').innerHTML = news.map(n => `
                <div class="aero-card p-6 flex flex-col h-full hover:border-brand-light transition duration-300">
                    <span class="text-brand-dark text-xs font-bold mb-2 block relative z-10 bg-brand-light/20 w-fit px-2 py-0.5 rounded-full">${n.date}</span>
                    <h3 class="text-xl font-bold mb-2 text-gray-800 relative z-10">${n.title}</h3>
                    <p class="text-gray-600 relative z-10 flex-grow leading-relaxed">${n.content}</p>
                     ${isEditMode ? `<button onclick="deleteNews(${n.id})" class="mt-4 text-red-400 text-sm hover:text-red-600 font-bold text-right relative z-10">–£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å</button>` : ''}
                </div>
            `).join('');
        }

        function renderProfiles() {
             document.getElementById('profiles-grid').innerHTML = profiles.map(p => `
                <div class="aero-card p-6 flex flex-col h-full hover:border-accent transition duration-300 text-center">
                    ${isEditMode ? `<button onclick="deleteProfile(${p.id})" class="absolute top-2 right-2 text-red-300 hover:text-red-500 transition-colors z-20"><i class="fas fa-times"></i></button>` : ''}
                    
                    <div class="mb-4 relative z-10">
                        <div class="text-6xl mb-3 transform hover:scale-110 transition-transform duration-200 cursor-default drop-shadow-md">${p.emoji}</div>
                        <h3 class="font-bold text-xl text-gray-800">${p.name}</h3>
                        <span class="inline-block mt-2 text-xs bg-gradient-to-r from-green-100 to-green-200 text-green-700 px-3 py-1 rounded-full font-bold shadow-sm border border-green-300">${p.hobby}</span>
                    </div>
                    
                    <div class="mt-auto bg-white/60 p-4 rounded-xl border border-white shadow-inner relative z-10">
                        <p class="text-gray-600 text-sm italic leading-relaxed">"${p.bio || '–ü—Ä–∏–≤–µ—Ç! –Ø –∏–∑ 5 –õ!'}"</p>
                    </div>
                </div>
            `).join('');
        }
        
        function renderGallery() {
            document.getElementById('gallery-grid').innerHTML = photos.map(src => `
                <div class="aspect-square rounded-xl overflow-hidden shadow-md cursor-pointer hover:shadow-xl transition duration-300 border-4 border-white">
                    <img src="${src}" class="w-full h-full object-cover transform hover:scale-110 transition duration-500">
                </div>
            `).join('');
        }

        function renderWishes() {
            document.getElementById('wishes-container').innerHTML = wishes.map(w => `
                <div class="bg-gradient-to-br from-pink-50 to-white p-6 rounded-2xl shadow-md border border-pink-200 relative">
                     ${isEditMode ? `<button onclick="deleteWish(${w.id})" class="absolute top-2 right-2 text-red-300 hover:text-red-500 transition"><i class="fas fa-times"></i></button>` : ''}
                    <div class="text-sm text-gray-500 mb-2 font-bold">–î–ª—è: <span class="text-pink-500">${w.to}</span></div>
                    <p class="text-gray-800 text-lg italic mb-4 leading-relaxed">"${w.text}"</p>
                    <div class="text-right text-sm font-bold text-brand-dark">‚Äì ${w.from}</div>
                </div>
            `).join('');
        }

        // --- –õ–û–ì–ò–ö–ê –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô) ---
        function openEditLeadership(type) {
            if(!isEditMode) { showToast("–í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!"); return; }
            const modal = document.getElementById('editLeadershipModal');
            const title = document.getElementById('leadershipModalTitle');
            document.getElementById('leadershipType').value = type;
            title.textContent = type === 'teacher' ? '–î–∞–Ω–Ω—ã–µ —É—á–∏—Ç–µ–ª—è' : '–î–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä–æ—Å—Ç—ã';
            document.getElementById('leadName').value = leadership[type].name;
            document.getElementById('leadPhone').value = leadership[type].phone;
            modal.classList.remove('hidden');
        }

        function submitLeadership(e) {
            e.preventDefault();
            const type = document.getElementById('leadershipType').value;
            leadership[type].name = document.getElementById('leadName').value;
            leadership[type].phone = document.getElementById('leadPhone').value;
            renderLeadership();
            closeModal('editLeadershipModal');
            showToast('–ö–æ–Ω—Ç–∞–∫—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã!');
        }

        function submitTeacher(e) {
            e.preventDefault();
            const subject = document.getElementById('teachSubject').value;
            const name = document.getElementById('teachName').value;
            teachers.push({ id: Date.now(), subject, name });
            renderTeachers();
            closeModal('addTeacherModal');
            e.target.reset();
        }
        function deleteTeacher(id) {
            if(confirm('–£–¥–∞–ª–∏—Ç—å —É—á–∏—Ç–µ–ª—è?')) {
                teachers = teachers.filter(t => t.id !== id);
                renderTeachers();
            }
        }

        function submitClassmate(e) {
            e.preventDefault();
            const name = document.getElementById('classmateName').value;
            classmates.push(name);
            classmates.sort();
            renderClassList();
            closeModal('addClassmateModal');
            e.target.reset();
        }
        function deleteClassmate(index) {
            if(confirm('–£–¥–∞–ª–∏—Ç—å —É—á–µ–Ω–∏–∫–∞?')) {
                classmates.splice(index, 1);
                renderClassList();
            }
        }

        function submitHomework(e) {
            e.preventDefault();
            const subject = document.getElementById('hwSubject').value;
            const task = document.getElementById('hwTask').value;
            const date = document.getElementById('hwDate').value;
            homework.push({ id: Date.now(), subject, task, date });
            renderHomework();
            closeModal('addHomeworkModal');
            e.target.reset();
        }
        function deleteHomework(id) {
            homework = homework.filter(h => h.id !== id);
            renderHomework();
        }
        
        function submitNews(e) {
            e.preventDefault();
            const title = document.getElementById('newsTitle').value;
            const content = document.getElementById('newsContent').value;
            news.unshift({ id: Date.now(), title, content, date: new Date().toLocaleDateString('ru-RU', {day:'2-digit', month:'2-digit'})});
            renderNews();
            closeModal('addNewsModal');
            e.target.reset();
        }
        function deleteNews(id) {
             news = news.filter(n => n.id !== id);
             renderNews();
        }

        function submitProfile(e) {
            e.preventDefault();
            const name = document.getElementById('profName').value;
            const hobby = document.getElementById('profHobby').value;
            const bio = document.getElementById('profBio').value;
            const emoji = document.getElementById('profEmoji').value;
            
            profiles.push({ id: Date.now(), name, hobby, bio, emoji });
            renderProfiles();
            closeModal('addStudentProfileModal');
            e.target.reset();
        }
        function deleteProfile(id) {
             profiles = profiles.filter(p => p.id !== id);
             renderProfiles();
        }
        
        function submitWish(e) {
            e.preventDefault();
            const to = document.getElementById('wishTo').value;
            const text = document.getElementById('wishText').value;
            const from = document.getElementById('wishFrom').value;
            
            wishes.push({ id: Date.now(), to, text, from });
            renderWishes();
            closeModal('addWishModal');
            e.target.reset();
            showToast('–ü–æ–∂–µ–ª–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!');
        }
        function deleteWish(id) {
            wishes = wishes.filter(w => w.id !== id);
            renderWishes();
        }

        function editDaySchedule(day) {
            const current = schedule[day].join(', ');
            try {
                const newLessons = prompt(`–í–≤–µ–¥–∏—Ç–µ —É—Ä–æ–∫–∏ –¥–ª—è ${day} —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é:`, current);
                if (newLessons !== null) {
                    schedule[day] = newLessons.split(',').map(s => s.trim());
                    renderSchedule();
                }
            } catch (e) {
                alert("–í–∞—à –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–∫–Ω–∞ –≤–≤–æ–¥–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä.");
            }
        }
        
        function handlePhotoUpload(input) {
             if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    photos.unshift(e.target.result);
                    renderGallery();
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- –û–ë–©–ò–ï –§–£–ù–ö–¶–ò–ò ---
        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('mobile-menu').classList.add('hidden');
            window.scrollTo(0,0);
        }
        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }
        function openModal(id) {
            if(id !== 'addStudentProfileModal' && !isEditMode && id !== 'addNewsModal' && id !== 'addWishModal') { 
                // Logic
            }
            document.getElementById(id).classList.remove('hidden');
        }
        function closeModal(id) {
            document.getElementById(id).classList.add('hidden');
        }
        function showToast(msg) {
            const t = document.getElementById('toast');
            t.textContent = msg;
            t.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => t.classList.add('translate-y-20', 'opacity-0'), 3000);
        }
    </script>
</body>
</html>